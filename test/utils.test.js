const { assert } = require('chai')
const Utils = require('../src/utils.js')

describe('utils.validateTrytesFee', () => {
  const depositAddress = 'JKHFORHNEWPHTDRLTMYXARCOFEFCPTTDIICHSKK9KXZBXOOXZPTJFVKMQZHTFFCVPHGUVPLGPJMPUFKFWQMAMGZXRX'

  const validTrytes = ['999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999LABNGFFMNNWJRQ9WBAZGYJUPKQIZZGSOVHL9ZCBOIHDNLWPWPTDBMR9TUENBENHFPISOAQBZWORGCWIKJ999999999999999999999999999UC9999999999999999999999999EUTVUYD99999999999E99999999CYVZECGLPIQGSEVLGWOAAVHTWCRLHFFHQGUF9ZKFRLTVCZB9GFVNHQTNI9SKSKSSEDS9DKHA9UHFRTWGCCUXTNQMMZEWZSIJMJFYZMNULRFFJPGGBOFQPFZSZIEBOQ9BBELHLDNWUSKOKCFAWSVLVGHNFFZ9R99999JMIMOMKEDSCRXIFG9R9HQKIGQMUIZEINIHGFOWCTIWGGNLYEAUBRJERVSGPEIZYDVCSQNTOYZBQHA9999UC9999999999999999999999999KFHZOLBJE999999999L999999999WVJKRIWHVMHOGJ9YGDLJQSLKNR',
    '999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999LABNGFFMNNWJRQ9WBAZGYJUPKQIZZGSOVHL9ZCBOIHDNLWPWPTDBMR9TUENBENHFPISOAQBZWORGCWIKJ999999999999999999999999999999999999999999999999999999EUTVUYD99A99999999E99999999CYVZECGLPIQGSEVLGWOAAVHTWCRLHFFHQGUF9ZKFRLTVCZB9GFVNHQTNI9SKSKSSEDS9DKHA9UHFRTWGCWVHJGDFLHY9MBMVAKGTVWNHUKWMDZPCVWMLIYBBQHQYNMNZKQSPUIVWVUWOPP9GHZKA9PQNENPDS99999JMIMOMKEDSCRXIFG9R9HQKIGQMUIZEINIHGFOWCTIWGGNLYEAUBRJERVSGPEIZYDVCSQNTOYZBQHA9999999999999999999999999999999IRQZOLBJE999999999L99999999QGENCRCPOZMUNIGUEYFOHXGFEZN',
    '999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999JKHFORHNEWPHTDRLTMYXARCOFEFCPTTDIICHSKK9KXZBXOOXZPTJFVKMQZHTFFCVPHGUVPLGPJMPUFKFWF99999999999999999999999999999999999999999999999999999EUTVUYD99B99999999E99999999CYVZECGLPIQGSEVLGWOAAVHTWCRLHFFHQGUF9ZKFRLTVCZB9GFVNHQTNI9SKSKSSEDS9DKHA9UHFRTWGCRLLMGKTSTENZNFNHGBKIFOORCMYMQEESXZNPFSLCBVJKFDSQQFBDCWEBPSVARHNVBYEIZEWST9ZLA9999JMIMOMKEDSCRXIFG9R9HQKIGQMUIZEINIHGFOWCTIWGGNLYEAUBRJERVSGPEIZYDVCSQNTOYZBQHA99999999999999999999999999999999AMYOLBJE999999999L99999999QMFJNMYVAGHDPVM9QUJ9DLEJZRG',
    'JNATMU9IHQWBLACSPRSSXFYDMS9WTX9ONOWISOHDVVTIFC9UVBMQMTYVQRTUBQFH99VTL9HPFWCNANOJAMXHFTHSYPFYZQDDNDFLIRILUZKYO9UAWJDMMSEMYGINYVCOMHFUGCVTCFWFKACWCAUQQI99WZAAWMGGM9IETJQZMKWSRXXFGSIYRUWOXWTBTVZWHKXYKBU9REWANTIKIVEKBK9LXZCNVAYOIUWSBLFBCIWJKJHGTVXDZRFOGDEMPWVOXPEVXNZIRCHVJHCUSEDZGFNGHFEFZRVCNRSKVWHDKIYPPBAQFUWWFEWBJHIIVGASTZYCHOE9MYPGELGZPDSLCXETHNCSVKJOKKENOKR9GSUQ9IQNWSOQHEZQXYDSPRBTLYYJ9HABLTICHWDPBOUUDJZWQRVXHZZUKBJPMSFRG9YCYGIZZDOYOFSLPZTCQXXKFMLFOKPVNHUVSWAMQCUVHIKJ9KWBGVPNTUZVIXSUR9NFAWHADLOADDQEFSHOZRKE9QHXNNQVGJQZENEQCNJKVDHEZDMMDNEEFJDIVIWRSCXJM9AETKJITL9CVEIYWKDWPHCNRHHAYXACYPEPZYJHDBESFQYWDGSGSLDNWENPGBTEPZPBPGOSYUASJJOPODQWRBPLHTCDXZHJDINKDPG9TTUWF9UCJTUBDHTMMJNUAIOZZEJXSXRKYCKCLBERSWVAXRCSNYASCDNZDOD9XSJEXLTCYGVTNZVHKVX9DUUMDQOVQTFSSDIXVRDPBBAQXYANJEOXHLPVTJEGABJJYWIJNXG9ZUVEM9RKCBTJVPTKIAEFLQQZKPHKH9SRQUUHEYPENJRFOPJWZPAIOHZBSOUCWQHJSFCVU9ZGNLQLPVREJCQDQQRGPDRRZQETYTDAHOAMFZUYBJDVOFCGWSGSMVQNROXQ9DVSBL9XAXNEHSYHVHBIUIFWGV9FQADHEGCTUXDIAQJOCTEJTLPWUCLILVX9AKBGCQMANXDXTYLDRCTJBXGGYDHZMILENQNECBUVUKMDVIMSOLHBWWOHVPVBVBPR9OGQNKMECTPDVDTIZJQCNIDKCWZLZOAKUZDXUKI9ZLPWBRABXIDWGXQPKNZ9E9JJNOOZEOPLYRIHDOENLGATPMMUFWMLLZJJULFKDHDXJTTMWBLKOYNAS9DJBPNKMTFSEISPYIRWXCUBBECYEXEPUPNVR99QALQBNCTVQ9TYVE9WQNEQARBOLTQFU9DOZAKSYITUFYLGPRLWLILEELLVVQUM9LRXUSFUZQMRSFAVPOTQFAKXBDLRBTTJZEY99NZDZARGOBHKMDUNDFUCZUHGLVYU9NKHAZXYYAPJCCJYBYXUMIZVWCEASAELCMESZHNCMDQQWHC9EJFWXMZQZECHJKAINM9WKTKUXLNOZNEXGUNSBNTFZSAKOABSJ9IRKQXCQWYPPMEJKQXJS9PFDNKVAQYGIMZLXXUGWLBPIWMIIPGGQGOZBSECEEPCSCXKHFVKTVCHGYBBW9QVYHHJPCHDSJIM9OOPGSIRWKGZSCRQRTLHOFDFBOURCURFHEFRKZBJXAQVUCTSTNROUCFJOIPGHNNQPBPAJKFVFMNAQNM9ZNYYNFJTJJNTCUNBAKDWUYWWKNJZESXARHWNEWMRTMKGNVHRZWJRHOBFIDGNMGAPIYXKMRGELZRIBPIRAULBWEQRDZTH9QWWMLNOD9PTDXWKZOIUBYSMHMQEHIPVOAT9PDGOFYENRRDIIYSMYBKDWLEFDKALZFBJ9ROIGAVOVOOMK9LXOZDKZVGIE9XSJTCTDIKMYZSFD9CVHQOFXTWBGJIKZIBGIEYJHQFOHVEOKUULCHDWUNKBYOZJAZNWLYAFVSRCXOAYKDWCTRJWMPSFYSQKQMPPZYZTOSRLFWXBOEFNVE9E9NEIDHOHXWQ9FAZZVTZEJ9HFWTZNSBNWSAI9TROGCJU9TIFMSFXTXXVPVOLFMHDKFWZDXTRPRGNSUCXLXG9VN9GDTAL9NIBHNPIPNTFTE9ZLYJTBOOKLVXPTBRKNWRIVLUEOAOXKCFBLDBCLXYSETEYIMOFUYAZDUYWHGXWAPQEBQIKUDZUDVOF9DETRZYBWTND9WHXCMCFF9WTU9GYRXRMBZTTEHKN9VQJSYJXVVTFBMXSPJHSLASCNHRPDCTELFAUMGHBYGATCZHIMSANNOGRATQLI9V9OBNCJOBRADFHQVPKBHZSAEMYFAISOVIZGKDQSSXJHSLYDLBRNYJOISYSQKMNS9VMSMGLBFRNZBEHNAUACCP9999999999999999999999999999999999999999999999999999IUTVUYD99C99999999E99999999CYVZECGLPIQGSEVLGWOAAVHTWCRLHFFHQGUF9ZKFRLTVCZB9GFVNHQTNI9SKSKSSEDS9DKHA9UHFRTWGCLNUDQYGKQAXLKUSZQZZGRZWJQHMSRLCCMPOHFWNKHSSS9TLYMBDL9WEAPJRWDXXREVCHBVUKPDHP99999JMIMOMKEDSCRXIFG9R9HQKIGQMUIZEINIHGFOWCTIWGGNLYEAUBRJERVSGPEIZYDVCSQNTOYZBQHA9999999999999999999999999999999QHKYOLBJE999999999L99999999TAMJOVCCUBCYOIAOSLFJEIWWTKI',
    'YDECBNFGYYAEUSWSOAUBZKMWEEUOENQOKSORMMZOZNJYMCKXWGPZAGQCPOWI9SUWTXLWNILRXJDAMVQIZJVOINXJEBFPCYFKHNNJEVPERWUCANDDTDGNELFXHHSZDKPOTYUNHUYELRNIAACPD9WELY9ITKMCTFFNCDGXYKNSFSBBFDBMOYBKHYUVNGLTACTCSTTIXFEKPKCWMBGIQCUWMAINFAIOZDRIEOUDGRJGYJU9TMKWOXYBWJBNZGITBFKECAKSQNVICSFBOCET9PECABEDMPHOOPBPFDYKHZAJI99TSWCKXUOXMSNNLZSMIJDAZCZ9HLXZBIXTVZXNTPVY9FUNIFYBBOTNPXGQUXAFUKYPSHPQFXBLJTJZJUU9CE9DLYSEPPPQPVRIQODWCFDNWEAXNACVQYBFHVT9OLKHYAYTFUXROSZEWGLGVUTWTJAZYUPDVDGCKGNEVKTUDNYGMMDKYQEXNN9IPUAANAWEUZC9MFGHKKJYOQWGOOTMFUKZBBNNGGJPUWWRMGUABBNIXXQOVJHNNDPWKXONCNYODEMJRDB9NZMOTMCSSKTAOJE9SYQ9OLGFBDBAMYNULVSOVYMAOCRBJQZDGRJXXNBXLNYD9HB9RYZRKWSDINLFNDPFTOIIMN9WNJNQTBQTFIHGFIMOEHTIYRUDNYTYWDLDXSQFWFHIUJMXPNAMDLTURUMOPAJBHWUGXDKAUGBCONJCMLGJYKNCVNWDYWQYMIWJUNMWONAIBLFFWMZYFROGCTQDPQXYRMEBVPVDUUCIVL9JGLAEXYAHLTIJHXBQHSQNBYSADRLPUMJGNKSBVYYAZKKBYQXLFEIOBSUFRXTIXCWQITDQOWPPVFMXLCMGZEODCXNNSFMWNPYEDPYJRBXNHINCJMVGKFMMDHPLLJAYOMRIMVVDXDAKBSBFSWNSM9ZEIGDSBDRGUBHKNAEMSJFSOVENTXLPCRDEZUTDIPXLDFBZZ9YHLDQHWJ9KYJKRNLJSGLMYOMPBANMOEKWNGGFKQZSIIQDOKZ9VQ9ENSGXYQW9MRHVLHWOIDEGTZJXBIUHBRALCZFGMUFPQKAOKRGALVWFU9UGIXAAYL9DVBUGVZZIVJIGECLMNRLVVEK9UDDTSHUCYJWKWSTRTATPP9CHKHFRERQPNBGYQGNZJBNX9AHTBZBHXMVCLWNNR9PPYRBPKWJHOVLQDINOAICJA9TTNCNWXYPHWAZJTNRAPYZGFUCPUKRZLIULHQJLCZ9IRPSNTCPYQEZTOTWAUSN9PAMOZH9HECJABVULDMQDXJRPAAEQQPMILMBKUCT9NWJWBAZTLFYJYBFHJZOLBAVQRRRAOSKESNQHCUH9C9TEUMB9CTIMSWOEFOXOIVP9ZDKJMI9IXWRZTOACIWQNPHRMOYBVWAGPCYEIA9ODHOSNYFWNVFRGOWQXTOXUSISWWYEWNBXWQGMHPRDDAXD9IWCNIOAXIZWBASOZRIPMWRLAUTYBRSGRQELLPKFGMKYJMZ9UIZCAJCZWLC9KFKFI9QZU9ZDMVBLNCFZZPNTZTZYJJUGVWZEUXISI9VSTLDGJVKENDYZTTCQDEKWPRPN9DEMBFGKMPNXPRFNXTKOPKHBLTYDFWGUKBSILTEJNJIF9ZINIAHEFGAGVYNSXLVIZXANKWPRUOIAOTATHHSVGCTUBBLDKZRLVDVNCHRCTWDEZQZYSC9DMWYJYXLRP9ZBCYBDBWEGYLUOYNCN9RQSYAGEKCKPXNJLZDPDNIEAUMELESUYVTSREWHQAOX9WFGMGYACIEZKQ9CTKUWVTRMM9ZXBNUBBIJA9OR9KVZCVROTCPFTWQAHFUARHIBLVPKDXNDKQVXAADJWT9IDMHSSWCOBUVZIHEAMLGOSOQO9BBJNYJXAWPDKPYQKLMQVUFYXLVRDNEHSAXZJTIMY9NINANCHGBRQVQN9XPHTRAAYBPGDBXYMY9HETJQWLKPRX9RPBNMKUQZSWJCJFIZEKYJSA9VNXVATMLUDQJMWBFQNIJHLFATLXCMCUW9ABVAXGDLHFSNCDNFTESNKRKZPRHKEDEPWTARRTLZXHPNGEUTTBXFYXOPCFEGTFGYXBUGDBTBGM9QPPP9NYAOMWXYDXWQEI9GWURHXFNCCAYSPGGNEHAVBGBLMLQPN9VVG9PQGQPXHJDQPIZLRKDPCLUVSKOJVLKOOPCOBNCJOBRADFHQVPKBHZSAEMYFAISOVIZGKDQSSXJHSLYDLBRNYJOISYSQKMNS9VMSMGLBFRNZBEHNAUAC999999999999999999999999999999999999999999999999999999IUTVUYD99D99999999E99999999CYVZECGLPIQGSEVLGWOAAVHTWCRLHFFHQGUF9ZKFRLTVCZB9GFVNHQTNI9SKSKSSEDS9DKHA9UHFRTWGC9TLQBTBRTAFENTCGYPIFCSRTXMSOURKSWOJBCHSRKR9KHAFRSMTRWU9STEOYW9UOGOK9IQOADPWXA9999JMIMOMKEDSCRXIFG9R9HQKIGQMUIZEINIHGFOWCTIWGGNLYEAUBRJERVSGPEIZYDVCSQNTOYZBQHA9999999999999999999999999999999QAEYOLBJE999999999L99999999BJJQBUZFMJYBMNWHBWJYNALIRLY',
    '999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999XANPWDMUULAHWZ9QYRSUFHF9FEHJLDZGNBYPPEKCTWQD9WPYELPTPUVPQJPDDDEJAWRKH9EVQWHEQQDDDRK9999999999999999999999999999999999999999999999999999KUTVUYD99E99999999E99999999CYVZECGLPIQGSEVLGWOAAVHTWCRLHFFHQGUF9ZKFRLTVCZB9GFVNHQTNI9SKSKSSEDS9DKHA9UHFRTWGCJMIMOMKEDSCRXIFG9R9HQKIGQMUIZEINIHGFOWCTIWGGNLYEAUBRJERVSGPEIZYDVCSQNTOYZBQHA9999LRML9FNHIKCQMMJXQGNDNNASNKTDDELKKJPHPNUBOPYSNHAGWWBFNOIKUIUBGNKDYBIWLZIXMBFEZ9999999999999999999999999999999VUEYOLBJE999999999L99999999OYGKVGW9YGUKVHJIDWAAAMHIUHW',
  ]

  const tests = [{
    message: 'valid trytes',
    trytesBundle: validTrytes,
    feePerTx: 1,
    depositAddress,
    expected: true,
  },
  {
    message: 'invalid trytes (wrong address)',
    trytesBundle: validTrytes,
    feePerTx: 1,
    depositAddress: '9999ORHNEWPHTDRLTMYXARCOFEFCPTTDIICHSKK9KXZBXOOXZPTJFVKMQZHTFFCVPHGUVPLGPJMPUFKFWQMAMGZXRX',
    expected: false,
  }, {
    message: 'invalid trytes (wrong fee)',
    trytesBundle: validTrytes,
    feePerTx: 2,
    depositAddress,
    expected: false,
  },
  ]

  tests.forEach((test) => {
    it(`should be ${test.message}`, () => {
      assert.equal(
        Utils.validateTrytesFee(test.trytesBundle, test.feePerTx, test.depositAddress),
        test.expected,
      )
    })
  })
})
